---
interface Props {
  title: string;
  slug: string;
  status?: string;
  type?: string;
  summary?: string;
  updatedAt?: string;
  publishedAt?: string | null;
}

const {
  title,
  slug,
  status = 'draft',
  type = 'article',
  summary,
  updatedAt,
  publishedAt,
} = Astro.props as Props;

const displayDate = publishedAt ?? updatedAt;
const formattedDate = displayDate
  ? new Intl.DateTimeFormat(undefined, {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
    }).format(new Date(displayDate))
  : null;
const href = `/blog/${slug}`;
---

<article class="article-card">
  <div class="article-meta">
    <span class={`status-pill status-${status.toLowerCase()}`}>{status}</span>
    <span class="type-pill">{type}</span>
    {formattedDate && <span class="date">{formattedDate}</span>}
  </div>
  <h3 class="title">
    <a href={href}>{title}</a>
  </h3>
  {summary && <p class="summary">{summary}</p>}
</article>

<style>
  .article-card {
    background: #ffffff;
    border-radius: 1.25rem;
    padding: 1.75rem;
    box-shadow: 0 24px 45px rgba(15, 23, 42, 0.12);
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .article-meta {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.9rem;
  }

  .status-pill,
  .type-pill {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    border-radius: 999px;
    text-transform: capitalize;
    font-weight: 600;
  }

  .status-pill {
    background: rgba(99, 102, 241, 0.15);
    color: #4338ca;
  }

  .status-published {
    background: rgba(16, 185, 129, 0.15);
    color: #047857;
  }

  .status-draft {
    background: rgba(148, 163, 184, 0.2);
    color: #475569;
  }

  .type-pill {
    background: rgba(15, 23, 42, 0.08);
    color: #1f2937;
  }

  .date {
    color: #64748b;
  }

  .title {
    margin: 0;
    font-size: 1.5rem;
  }

  .title a {
    color: #111827;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .title a:hover {
    color: #6366f1;
  }

  .summary {
    margin: 0;
    color: #475569;
    line-height: 1.6;
  }
</style>
